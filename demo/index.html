<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>scroll-frame-canvas Demo</title>
  </head>
  <body>
    <style>
      html, body { margin: 0; }
      body { background: #111; }
      /* 场景区域，内部的 pin 容器会吸顶直至该区域结束 */
      #stage { height: 300vh; position: relative; }
      .pin { position: sticky; top: 0; height: 100vh; }
      #canvas { width: 100%; height: 100%; display: block; object-fit: cover; }
      /* 红色容器，滚到这里时 canvas 将随滚动离开视口 */
      .after { background: #e6e1e1; }

      /* 弹跳动画 */
      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }
    </style>

    <section id="stage">
      <div class="pin">
        <canvas id="canvas" width="1920" height="1080"></canvas>
        <!-- 交互提示 -->
        <div id="scrollHint" style="position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); color: white; text-align: center; opacity: 0; transition: opacity 0.5s ease-in-out; pointer-events: none; z-index: 10;">
          <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
            <div style="font-size: 16px; font-weight: 500; text-shadow: 0 2px 4px rgba(0,0,0,0.5);">
              往下滑动查看动画
            </div>
            <div style="animation: bounce 2s infinite;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M7 13l3 3 7-7"/>
                <path d="M7 6l3 3 7-7"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="after">
      <div style="max-width: 1200px; margin: 0 auto; padding: 80px 40px; color: #333; font-family: 'Arial', sans-serif; line-height: 1.6;">
        <h1 style="font-size: 48px; font-weight: 900; margin-bottom: 30px; text-align: center; color: #2a2a2a;">
          scroll-frame-canvas
        </h1>

        <p style="font-size: 20px; text-align: center; margin-bottom: 60px; color: #666;">
          高性能的滚动驱动帧序列动画库，让你的网页体验更加生动
        </p>

        <!-- GitHub 链接按钮 -->
        <div style="text-align: center; margin-bottom: 60px;">
          <a href="https://github.com/Byte-n/scroll-frame-canvas" target="_blank" style="background: linear-gradient(135deg, #24292e 0%, #2c3e50 100%); color: white; padding: 15px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 10px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(36, 41, 46, 0.3); border: none; font-size: 16px;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            GitHub 仓库
          </a>
        </div>

        <!-- Adaline 介绍部分 -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; border-radius: 16px; margin-bottom: 60px; color: white; text-align: center;">
          <h2 style="font-size: 32px; font-weight: 700; margin-bottom: 20px; color: white;">
            🎬 演示素材来源
          </h2>
          <p style="font-size: 18px; margin-bottom: 25px; opacity: 0.9;">
            本演示的动画素材来源于 <a href="https://www.adaline.ai/" target="_blank" style="color: #ffd700; text-decoration: none; font-weight: 600;">Adaline</a>
          </p>
          <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 12px; backdrop-filter: blur(10px);">
            <h3 style="font-size: 24px; margin-bottom: 15px; color: #ffd700;">关于 Adaline</h3>
            <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px; opacity: 0.9;">
              <a href="https://www.adaline.ai/" target="_blank" style="color: #ffd700; text-decoration: none; font-weight: 600;">Adaline</a> 是专为世界级产品和工程团队打造的端到端 LLM 开发平台，提供迭代、评估、部署和监控的完整解决方案。
            </p>
            <div style="margin-top: 25px;">
              <a href="https://www.adaline.ai/" target="_blank" style="background: #ffd700; color: #333; padding: 12px 24px; border-radius: 25px; text-decoration: none; font-weight: 600; display: inline-block; transition: transform 0.2s;">
                访问 Adaline →
              </a>
            </div>
          </div>
        </div>

        <!-- 帧数控制面板 -->
        <div style="background: #f8f9fa; padding: 30px; border-radius: 12px; margin-bottom: 40px; text-align: center;">
          <h3 style="color: #2a2a2a; margin-bottom: 20px; font-size: 24px;">
            🎛️ 帧数控制
          </h3>
          <div style="display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
            <label style="display: flex; align-items: center; gap: 8px; font-size: 16px; color: #333;">
              <span>帧数比例:</span>
              <select id="frameRatio" style="padding: 8px 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; background: white;">
                <option value="0">全量帧 (100%) + 优化</option>
                <option value="1">全量帧 (100%)</option>
                <option value="2">1/2 帧 (50%)</option>
                <option value="4" >1/4 帧 (25%)</option>
              </select>
            </label>
            <button id="rerenderBtn" style="background: #007acc; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background 0.2s;">
              重新渲染
            </button>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px; margin-bottom: 60px;">
          <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <h3 style="color: #2a2a2a; margin-bottom: 15px; font-size: 24px;">🚀 高性能渲染</h3>
            <p style="color: #666; margin: 0;">
              使用 OffscreenCanvas 预渲染所有帧，运行时直接绘制 ImageBitmap，确保丝滑的滚动体验。
            </p>
          </div>

          <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <h3 style="color: #2a2a2a; margin-bottom: 15px; font-size: 24px;">⚡ 自定义映射</h3>
            <p style="color: #666; margin: 0;">
              通过 frameMapper 函数自定义滚动像素到帧索引的映射关系，完全控制动画节奏。
            </p>
          </div>

          <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <h3 style="color: #2a2a2a; margin-bottom: 15px; font-size: 24px;">🎨 TypeScript 支持</h3>
            <p style="color: #666; margin: 0;">
              完整的 TypeScript 类型定义，提供优秀的开发体验和代码智能提示。
            </p>
          </div>

          <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <h3 style="color: #2a2a2a; margin-bottom: 15px; font-size: 24px;">🔧 灵活配置</h3>
            <p style="color: #666; margin: 0;">
              支持水平/垂直滚动、事件系统、错误处理等丰富的配置选项，满足各种使用场景。
            </p>
          </div>

          <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <h3 style="color: #2a2a2a; margin-bottom: 15px; font-size: 24px;">💫 加载动画</h3>
            <p style="color: #666; margin: 0;">
              内置精美的加载动画，在图片预处理期间为用户提供视觉反馈，提升用户体验。
            </p>
          </div>

          <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <h3 style="color: #2a2a2a; margin-bottom: 15px; font-size: 24px;">📈 智能分层加载</h3>
            <p style="color: #666; margin: 0;">
              独创的 large 参数优化策略，采用分层递进式加载，优先加载关键帧实现快速预览，后台继续加载完整细节帧，大幅提升大型动画的启动速度。
            </p>
          </div>
        </div>

        <div style="background: #f8f9fa; padding: 40px; border-radius: 12px; margin-bottom: 40px;">
          <h3 style="color: #2a2a2a; margin-bottom: 20px; font-size: 28px; text-align: center;">
            快速开始
          </h3>
          <pre style="background: #2a2a2a; color: #e6e6e6; padding: 25px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; font-size: 14px; margin: 0;"><code>import ScrollFrameCanvas from '@byte.n/scroll-frame-canvas';

const player = new ScrollFrameCanvas({
  total: 100,
  imageFactory: async (i) => `./frames/frame-${i}.jpg`,
  canvasEle: document.getElementById('canvas'),
  scrollbarEle: window,
  scrollAxis: 'y',
  frameMapper: (scrollPixels) => Math.round(scrollPixels / 10),
  onInitComplete: () => console.log('Ready!')
});

player.init().then(() => player.play());</code></pre>
        </div>

        <!-- ScrollFrameCanvas 初始化参数说明 -->
        <div style="background: #f8f9fa; padding: 40px; border-radius: 12px; margin-bottom: 40px;">
          <h3 style="color: #2a2a2a; margin-bottom: 30px; font-size: 28px; text-align: center;">
            📋 ScrollFrameCanvas 初始化参数说明
          </h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px;">
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #007acc; margin-bottom: 15px; font-size: 18px; font-weight: 600;">基础配置</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>canvasEle:</strong> HTMLCanvasElement - Canvas 元素（必填）</div>
                <div style="margin-bottom: 8px;"><strong>scrollbarEle:</strong> HTMLElement | Window | Document - 滚动容器（必填）</div>
                <div style="margin-bottom: 8px;"><strong>scrollAxis:</strong> 'x' | 'y' - 滚动轴方向（必填）</div>
                <div style="margin-bottom: 8px;"><strong>frameMapper:</strong> Function - 滚动像素到帧索引的映射函数（必填）</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #007acc; margin-bottom: 15px; font-size: 18px; font-weight: 600;">数据源配置</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>images:</strong> Array&lt;HTMLImageElement | ImageBitmap | string&gt; - 图片数组</div>
                <div style="margin-bottom: 8px;"><strong>total:</strong> number - 总帧数</div>
                <div style="margin-bottom: 8px;"><strong>imageFactory:</strong> Function - 异步图片工厂函数</div>
                <div style="margin-bottom: 8px;"><strong>maxConcurrentLoads:</strong> number - 最大并发加载数（默认: 6）</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #007acc; margin-bottom: 15px; font-size: 18px; font-weight: 600;">渲染配置</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>scaleMode:</strong> 'contain' | 'cover' | 'fill' - 缩放模式（默认: 'contain'）</div>
                <div style="margin-bottom: 8px;"><strong>resetScrollOnInit:</strong> boolean - 初始化时重置滚动位置（默认: true）</div>
                <div style="margin-bottom: 8px;"><strong>exitAnimationFrameRate:</strong> number - 退出动画帧率（默认: 75）</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #007acc; margin-bottom: 15px; font-size: 18px; font-weight: 600;">性能优化</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>large.enabled:</strong> boolean - 启用分层加载（默认: true）</div>
                <div style="margin-bottom: 8px;"><strong>large.factor:</strong> number - 分层因子，必须是2的幂次方（默认: 4）</div>
                <div style="margin-bottom: 8px;"><strong>large.showBackgroundProgress:</strong> boolean - 显示后台加载进度（默认: true）</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #007acc; margin-bottom: 15px; font-size: 18px; font-weight: 600;">事件回调</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>onFrame:</strong> (frame: number, offset: number) => void - 帧更新回调</div>
                <div style="margin-bottom: 8px;"><strong>onComplete:</strong> () => void - 动画完成回调</div>
                <div style="margin-bottom: 8px;"><strong>onInitComplete:</strong> () => void - 初始化完成回调</div>
                <div style="margin-bottom: 8px;"><strong>onError:</strong> (error: Error) => void - 错误回调</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #007acc; margin-bottom: 15px; font-size: 18px; font-weight: 600;">自定义渲染</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>customMainLoading:</strong> Function - 自定义主加载动画</div>
                <div style="margin-bottom: 8px;"><strong>customBackgroundLoading:</strong> Function - 自定义后台加载动画</div>
              </div>
            </div>
          </div>
        </div>

        <!-- ScrollFrameCanvas 事件、实例函数说明 -->
        <div style="background: #f8f9fa; padding: 40px; border-radius: 12px; margin-bottom: 40px;">
          <h3 style="color: #2a2a2a; margin-bottom: 30px; font-size: 28px; text-align: center;">
            🔧 ScrollFrameCanvas 事件、实例函数说明
          </h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px;">
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #28a745; margin-bottom: 15px; font-size: 18px; font-weight: 600;">生命周期方法</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>init():</strong> Promise&lt;this&gt; - 初始化并预加载所有帧</div>
                <div style="margin-bottom: 8px;"><strong>destroy():</strong> void - 销毁实例并清理资源</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #28a745; margin-bottom: 15px; font-size: 18px; font-weight: 600;">播放控制</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>play():</strong> void - 开始播放动画</div>
                <div style="margin-bottom: 8px;"><strong>pause():</strong> void - 暂停播放</div>
                <div style="margin-bottom: 8px;"><strong>stop():</strong> void - 停止并重置到第0帧</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #28a745; margin-bottom: 15px; font-size: 18px; font-weight: 600;">帧控制</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>setFrame(frameIndex: number):</strong> void - 设置当前帧</div>
                <div style="margin-bottom: 8px;"><strong>getCurrentFrame():</strong> number - 获取当前帧索引</div>
                <div style="margin-bottom: 8px;"><strong>getTotalFrames():</strong> number - 获取总帧数</div>
              </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
              <h4 style="color: #28a745; margin-bottom: 15px; font-size: 18px; font-weight: 600;">事件系统</h4>
              <div style="font-size: 14px; line-height: 1.6; color: #333;">
                <div style="margin-bottom: 8px;"><strong>on('frame', callback):</strong> 监听帧更新事件</div>
                <div style="margin-bottom: 8px;"><strong>on('complete', callback):</strong> 监听动画完成事件</div>
                <div style="margin-bottom: 8px;"><strong>on('initComplete', callback):</strong> 监听初始化完成事件</div>
                <div style="margin-bottom: 8px;"><strong>on('error', callback):</strong> 监听错误事件</div>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align: center;">
          <h3 style="color: #2a2a2a; margin-bottom: 20px; font-size: 24px;">
            适用场景
          </h3>
          <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px;">
            <span style="background: #007acc; color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px;">产品展示</span>
            <span style="background: #007acc; color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px;">故事叙述</span>
            <span style="background: #007acc; color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px;">交互动画</span>
            <span style="background: #007acc; color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px;">数据可视化</span>
            <span style="background: #007acc; color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px;">创意展示</span>
          </div>
        </div>
      </div>
    </section>

  </body>
  </html>
